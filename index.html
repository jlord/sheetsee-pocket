<html>
	<head>
		<title>Palar Club- Buy-Sell-Share</title>
    <meta charset="UTF-8">
		<script type="text/javascript" src="js/ICanHaz.js"></script> 
		<script type="text/javascript" src='js/jquery.js '></script>
    <script type="text/javascript" src='js/tabletop.js'></script>
    <script type="text/javascript" src='js/site.js'></script>
		<script type="text/javascript" src='js/sheetsee.js'></script>
    
		<link rel="shortcut icon" href="https://raw.github.com/jlord/sheetsee-pocket/master/favicon-p.png"/>
		<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
		<link media="screen" rel="stylesheet" type="text/css" href="css/style.css"> 
	</head>
<body>
	<h2> Welcome to Palar Club Buy-Sell-Share portal. </h2>
	<p> 1. Advertise among the club members, the items you want to sell/ rent/ share for free / wish to buy with contact information. 2. Get replies from interested members directly. 3. Complete the transaction offline and remove the item listing using the input form response link.</p>
	<h2>Disclaimer:</h2>
        <p>Palar Club does not Solicit, Represent or Endorse the Marketability, Reliability , Quality or Price of any Products or Articles Advertised, Displayed, Purchased, or Obtained by you in connection with the services herein. All transactions are to be undertaken at your own risk and responsibilities. </p>
 	<a href="http://bit.ly/palarbuysell" class="sml-button"> Input Form</a>
	<h2>Listings</h2>
<div id="loader"></div>
<div id="wrapper" style="display:none;">
		<div id="title"></div>
		
		<h3>What are you looking to do today? [Click any button below to list items] </h3><span id="types"></span>   

		<div id="filters" class="container" style="display:none;">
			<input id="articleSearch" type="text" placeholder="Search for.."></input>
		<span class="clear sml-button">Clear</span> 
      		<h3>Categories </h3><span id="tags"></span>   </div>

		<div id="articleTable" style="display:none;"></div>

    <div id="info" >
        </div>
</div><!-- end wrapper -->	

	<script id="title" type="text/html">
		<h2><span class="highlighted"> Items Sold : {{numArticles}}</span></h2>
		
		
	</script>

  <script id="tags" type="text/html">
    {{#rows}}
      <span href="#" class="tag sml-button">{{.}}</span>
    {{/rows}}
  </script>

<script id="types" type="text/html">
    {{#rows}}
<span href="#" class="type lrg-button">{{type}} : {{count}}</span>
    {{/rows}}
  </script>

	<script id="articleTable" type="text/html">
	 {{#rows}}
	  <div class="blog-card">
    <div class="meta">
      <div class="photo" style="background-image:url('{{link}}');">
	  </div>

    </div>
    <div class="description">
      <h2>{{title}}  </h2> <h3>Added @ {{timestamp}}</h3> 
      <h2>category: {{category}}</h2>
	 <h2>{{condition}}</h2>
     <h2> {{price}}</h2>	 
<p>	     
{{description}}
{{name}}
{{staffno}}
{{autono}}
{{mobile}}
{{email}}
 </p>
    </div>
  </div>
	 {{/rows}}
	
	</script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
	
      var URL = "1O1ER8Mwra4DkPKUtdjzRBAsxz3Tt5aupm0xveleC1VQ"
      Tabletop.init( { key: URL, callback: showInfo, simpleSheet: true } )
    }) 
      
    function showInfo(data) {
	 document.getElementById("loader").style.display = "none";
	 document.getElementById("wrapper").style.display = "block";
	 var qData=parseData(data)
	 //getType(gData,"Item wanted")
	 //	     console.log(gData);
     // cleanDates(gData)
    //      pageTitle(gData)
     var gData =[]
	// console.log(gData);
      Sheetsee.makeTable(gData.reverse(), "#articleTable")
      Sheetsee.initiateTableFilter(gData, "#articleSearch", "#articleTable")
      $(document).on("click", ".tag", function(event){
        var tag = $(event.target).text()
        var tagFilter = getTagMatches(gData, tag)
        Sheetsee.makeTable(tagFilter.reverse(), "#articleTable")
		Sheetsee.initiateTableFilter(tagFilter, "#articleSearch", "#articleTable")
      })
	   $(document).on("click", ".type", function(event){
        var type = $(event.target).text()
		var typetext=type.split(':')
		console.log(typetext[0].trim())
        gData = getType(data, typetext[0].trim())
		drawTags(gData)
		document.getElementById("filters").style.display = "block";
		document.getElementById("articleTable").style.display = "block";
		Sheetsee.makeTable(gData.reverse(), "#articleTable")
		Sheetsee.initiateTableFilter(gData, "#articleSearch", "#articleTable")
      })
    }
	  
  </script>

</body>
</html>
