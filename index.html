<html>
	<head>
		<title>Palar Pitch - Buy, Rent, Sell, Share</title>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

		<script type="text/javascript" src="js/ICanHaz.js"></script>
		<script type="text/javascript" src='js/jquery.js '></script>
    <script type="text/javascript" src='js/tabletop.js'></script>
    <script type="text/javascript" src='js/site.js'></script>
		<script type="text/javascript" src='js/sheetsee.js'></script>
  	<link media="screen" rel="stylesheet" type="text/css" href="css/w3.css">
		<link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
		<link rel="manifest" href="manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="ms-icon-144x144.png">
		<meta name="theme-color" content="#ffffff">
		<script src='https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js'></script>
	</head>
<body>
	<div class="container" style="max-width:1100px; min-width:360px;margin:auto">
	 <header class="w3-container w3-center w3-padding-24 w3-white" >
    <h1 class="w3-xxxlarge"><b>PALAR PITCH</b> </h1>
	 <h4 class="w3-text-red"><b>Welcome to the Palar Club Buy-Rent-Sell-Share portal.</b></h4>
	<h6><span class="w3-tag">Disclaimer: Palar Club does not solicit, represent or endorse the marketability, reliability , quality or price of any products or articles advertised, displayed, purchased, or obtained by you in connection with the services herein. All transactions are to be undertaken at your own risk and responsibilities.</span> </h6>
  </header>

<div id="steps" class="w3-container w3-display-container">
	<span onclick="this.parentElement.style.display='none'"
  class="w3-button w3-large w3-display-topright w3-margin-right ">&times;</span>
	<ul class="w3-ul  w3-border ">
	<li style="margin:auto" class= "w3-text-red"> <b>3 Simple Steps</b></li>
  <li> <span class="w3-text-red">1.</span> Advertise among the BAP community, the items you want to sell/ rent/ share for free / wish to buy with contact information. </li>
  <li><span class="w3-text-red">2.</span> Get contacted by interested members directly.</li>
  <li><span class="w3-text-red">3.</span> Complete the transaction offline and remove the item listing using the input form response link sent to your mail.</li>
</ul>
<br>
	</div>
	<div id="loader" class="loader" style="margin:auto"><div id="title"></div>
	</div>

<div id="wrapper" class="w3-container w3-center" style="display:none;">

<div class="w3-container">
		<h5>What are you looking to do today? [Click any <span class="w3-text-red">button</span> below to list items] </h5>
	</div>
		<a href="https://forms.gle/2zWhk1jgpYNPgPpY6" class="w3-button w3-block w3-red" style="width:75%;margin:auto; white-space: normal; word-wrap: break-word;"> Advertise/ Sell [Google form - login required]</a>
		<br>
		<span id="types"></span>

		<div id="filters" class="w3-container" style="display:none;">
			<input id="articleSearch" type="text" placeholder="Search for.."></input>
		<span class="w3-button w3-red clear">Clear</span>
      		<h5>Categories [Click <span class="w3-text-blue">button</span> below to filter]</h5><span id="tags"></span>   </div>
<div class="w3-container">
		<div id="articleTable" style="display:none;"></div>
</div>

</div><!-- end wrapper -->
</div><!-- end cntainer-->

<div id="modal01" class="w3-modal" onclick="this.style.display='none'">
  <span class="w3-closebtn w3-hover-red w3-text-white w3-xxlarge w3-container w3-display-topright">&times;</span>
  <div class="w3-modal-content w3-animate-zoom">
    <img id="img01" style="width:100%">
  </div>
</div>

	<script id="title" type="text/html">
		Items Sold : {{numArticles}}
	</script>


	<script id="types" type="text/html">
	    {{#rows}}
	<button class="w3-button w3-block w3-red type" style="width:75%;margin:auto">{{type}} : {{count}}</button>
	<br>
	    {{/rows}}
	  </script>


  <script id="tags" type="text/html">
    {{#rows}}
      <span href="#" class="tag w3-button w3-blue w3-margin-bottom w3-margin-right">{{.}}</span>
    {{/rows}}
  </script>


	<script id="articleTable" type="text/html">
	 {{#rows}}
	  <div class="w3-card-4 w3-left-align w3-margin-bottom">
    <header class="w3-container w3-black">
	<h3 style="float:left"><b>{{title}} </b></h3> <h5 style="float:right">Added on {{timestamp}} </h5>
    </header>

<div class="w3-white w3-display-container">
	<span href="#" class="tag w3-button w3-blue w3-margin-bottom w3-display-topmiddle" >{{category}}</span>
<div class="w3-cell-row">


		<div class="w3-cell w3-container w3-mobile" style="padding:0px 16px;margin:w3-left;overflow :auto; word-break: break-all; 	{{#image}}width:75%	{{/image}}">
<br>
		<p> <span class="w3-text-red"> Description:</span></p>
	 	<p>{{description}}   </p>
	 	<p> <span class="w3-text-red"> Condition: </span> {{condition}} </p>
	 {{#location}}
	 	<p> <span class="w3-text-red"> Location: </span>
	 		<a href="https://www.google.com/maps/search/?api=1&query={{location}}" target="_blank"> {{location}}</a></p>
	 {{/location}}
	 {{#price}}
	 	<p> <span class="w3-text-red"> Expected price: </span> {{price}}</p>
	 	{{/price}}

	</div>
	{{#image}}
<div class="w3-cell w3-container w3-cell-middle w3-mobile" style="padding-right: 16px; width:25%">
	<p style="text-align:center">Click to zoom</p>
	<img src="{{link}}" style="width:100%;cursor:pointer;" onclick="onClick(this)" class="w3-hover-opacity"/>
	</div>
{{/image}}

</div>

	</div>

	<footer class="w3-container w3-light-gray w3-row w3-center"  style="padding:0px 8px;margin:w3-left;overflow :auto; word-break: break-all">
 <div class="w3-container w3-quarter" style="padding:0px 8px;">
 <p style="margin:0"> <span class="w3-text-red"> Name 	</span></p>
	 <p style="margin:0 0 8px">	{{name}} </p>
	 </div>
  <div class="w3-container w3-quarter" style="padding:0px 8px;">
 <p style="margin:0"> <span class="w3-text-red"> email </span></p>
 <p style="margin:0 0 8px"> <a href="mailto:{{email}}?subject=Palar Pitch-{{title}}
 &body=Hi, I'm interested in your listing {{title}}!">{{email}}</a></p>
</div>
 <div class="w3-container w3-quarter" style="padding:0px 8px; min-width:15%">
<p style="margin:0"> <span class="w3-text-red"> Auto 	</span>	</p>
<p style="margin:0 0 8px">{{autono}}</p>
</div>
 <div class="w3-container w3-quarter" style="padding:0px 8px; min-width:25%">
 <p style="margin:0"> <span class="w3-text-red"> mobile:</span> </p>
 <p style="margin:0 0 8px"><a href="tel:{{mobile}}">	{{mobile}}</a></p>
</div>
 </footer>
</div>
	 {{/rows}}
	</script>

	<script>
	function onClick(element) {
	  document.getElementById("img01").src = element.src;
	  document.getElementById("modal01").style.display = "block";
	}
	</script>


  <script>
    document.addEventListener('DOMContentLoaded', function() {
        Papa.parse('https://docs.google.com/spreadsheets/d/e/2PACX-1vStq8WtH_zPJ-V8aMBgaD9BLdYlHeOLrKbHE792i_YXoH2remV21uoh9Tl7zyrxk_yxOG8d4yd49BAB/pub?gid=1970048890&single=true&output=csv', {
          download: true,
          header: true,
          complete: function(results) {
            var data = results.data
            console.log(data)
	    showInfo(data)
          }
    })
    })

    function showInfo(data) {
	 document.getElementById("loader").style.display = "none";
	 document.getElementById("wrapper").style.display = "block";
	 var qData=parseData(data)
   var gData =[]
	      Sheetsee.makeTable(gData.reverse(), "#articleTable")
      Sheetsee.initiateTableFilter(gData, "#articleSearch", "#articleTable")
      $(document).on("click", ".tag", function(event){
        var tag = $(event.target).text()
        var tagFilter = getTagMatches(gData, tag)
        Sheetsee.makeTable(tagFilter.reverse(), "#articleTable")
		Sheetsee.initiateTableFilter(tagFilter, "#articleSearch", "#articleTable")
      })
	   $(document).on("click", ".type", function(event){
			  document.getElementById("steps").style.display = "none";
        var type = $(event.target).text()
		var typetext=type.split(':')
	  gData = getType(data, typetext[0].trim())
		drawTags(gData)
		document.getElementById("filters").style.display = "block";
		document.getElementById("articleTable").style.display = "block";
		Sheetsee.makeTable(gData.reverse(), "#articleTable")
		Sheetsee.initiateTableFilter(gData, "#articleSearch", "#articleTable")
      })
    }

  </script>

</body>
</html>
